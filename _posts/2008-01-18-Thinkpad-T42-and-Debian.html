---
layout: post
title: Thinkpad T42 and Debian
category: blogger
tags: linux debian laptop blogger
---
<p>
The other week my wonderful girlfriend came over with a "present". While I was expecting food or something another I was pleasantly surprised when she handed me a relatively unused <a href="http://reviews.cnet.com/laptops/lenovo-thinkpad-t42-2378/4505-3121_7-30871787.html">IBM <span class="blsp-spelling-error" id="SPELLING_ERROR_0">Thinkpad</span> T42</a>. I have sort of a fetish for laptops, and at last count have around 6. All are in some state or working order save my poor <span class="blsp-spelling-error" id="SPELLING_ERROR_1">iBook</span> G3 which has suffered one to many logic board failures to resurrect again. This one however was different, it's almost perfect. It has all of the features and non of the defects than the others have. Each always had one thing that would bother me: <span class="blsp-spelling-error" id="SPELLING_ERROR_2">trackpad</span> would go crazy, lid was too loose and kept falling back, or simply ran way to hot. So far this <span class="blsp-spelling-error" id="SPELLING_ERROR_3">Thinkpad</span> is not only the best Linux laptop I've had but the best one I've owned period. Here's the specs:
</p>
<p>
<ul>
    <li>Intel Pentium-M 1.7<span class="blsp-spelling-error" id="SPELLING_ERROR_4">Ghz</span> with <span class="blsp-spelling-error" id="SPELLING_ERROR_5">SpeedStep</span></li>
    <li>1GB <span class="blsp-spelling-error" id="SPELLING_ERROR_6">DDR</span> Memory</li>
    <li>80<span class="blsp-spelling-error" id="SPELLING_ERROR_7">Gb</span> Hard Drive</li>
    <li>DVD/CD-<span class="blsp-spelling-error" id="SPELLING_ERROR_8">RW</span> Drive</li>
    <li>802.11 B/G <span class="blsp-spelling-error" id="SPELLING_ERROR_9">WiFi</span></li>
    <li>1 <span class="blsp-spelling-error" id="SPELLING_ERROR_10">Gigabit</span> Ethernet</li>
    <li><span class="blsp-spelling-error" id="SPELLING_ERROR_11">ATI</span> Mobility 7500 on a 1024x768 LCD</li>
</ul>
</p>

<h1>Desktop:</h1>

<p>
<a onblur="try {parent.deselectBloggerImageGracefully();} catch(e) {}" href="/assets/images/posts/ruth01182008.png"><img width=600px style="margin: 0px auto 10px; display: block; text-align: center; cursor: pointer;" src="/assets/images/posts/ruth01182008.png" alt="" id="BLOGGER_PHOTO_ID_5156871665340096194" border="0" /></a>
</p>
<p>
In the week or so leading up to getting the <span class="blsp-spelling-error" id="SPELLING_ERROR_12">thinkpad</span> I had been configuring my Dell <span class="blsp-spelling-error" id="SPELLING_ERROR_13">Inspiron</span> 8500 with <a href="http://www.debian.org/releases/unstable/">Debian GNU/Linux Sid</a> and found to my delight that transplanting it's 80<span class="blsp-spelling-error" id="SPELLING_ERROR_14">Gb</span> hard drive worked beautifully. All I needed to do was change the <span class="blsp-spelling-error" id="SPELLING_ERROR_15">xorg</span>.<span class="blsp-spelling-error" id="SPELLING_ERROR_16">conf</span> drive from the <span class="blsp-spelling-error" id="SPELLING_ERROR_17">nvidia</span> one to the <span class="blsp-spelling-error" id="SPELLING_ERROR_18">Xorg</span> <span class="blsp-spelling-error" id="SPELLING_ERROR_19">ATI</span> one. After that I was in business and with a few tweaks I got many things working properly:
</p>
<p>
<ul>
    <li><span class="blsp-spelling-error" id="SPELLING_ERROR_20">ATI</span> 7500 Mobility: Yes, Direct Rendering enabled using <span class="blsp-spelling-error" id="SPELLING_ERROR_21">ati</span> driver in <span class="blsp-spelling-error" id="SPELLING_ERROR_22">xorg</span>.<span class="blsp-spelling-error" id="SPELLING_ERROR_23">conf</span> (listed below)</li>
    <li>Intel Pro Wireless 2100 3B <span class="blsp-spelling-error" id="SPELLING_ERROR_24">MiniPCI</span>: yes, after <a href="http://ipw2100.sourceforge.net/firmware.php">firmware download</a>
    </li>
    <li>Intel 82540<span class="blsp-spelling-error" id="SPELLING_ERROR_25">EP</span> <span class="blsp-spelling-error" id="SPELLING_ERROR_26">Gigabit</span> Ethernet: yes, with e1000 module
    </li>
    <li>Intel <span class="blsp-spelling-error" id="SPELLING_ERROR_27">SpeedStep</span>: Yes, using <span class="blsp-spelling-error" id="SPELLING_ERROR_28">cpufreq</span> the processor will scale from 1.7<span class="blsp-spelling-error" id="SPELLING_ERROR_29">Ghz</span> down to 700<span class="blsp-spelling-error" id="SPELLING_ERROR_30">Mhz</span> depending on power settings
    </li>
    <li>Suspend and Hibernate: Yes, using <span class="blsp-spelling-error" id="SPELLING_ERROR_31">acpid</span>. video and network come up correctly
    </li>
    <li><a href="http://www.thinkwiki.org/wiki/HDAPS"><span class="blsp-spelling-error" id="SPELLING_ERROR_32">HDAPS</span></a> (disk head parking): sort of, works after a <a href="http://www.thinkwiki.org/wiki/HDAPS#Kernel_patch">kernel patch</a>, but seemed to cause instability and it was a bit too sensitive, somethings making the system unusable while it was parked.</li>
</ul>
</p>
<p>
The best resource I found when setting everything up and learning about the capabilities of the hardware was the <a href="http://www.thinkwiki.org/"><span class="blsp-spelling-error" id="SPELLING_ERROR_33">ThinkWiki</span></a> site that has excellent Linux information on almost all <span class="blsp-spelling-error" id="SPELLING_ERROR_34">Thinkpad</span> models.
</p>
<p>
Overall this is a solid laptop, I guess you could say the lid is a bit flimsy, but it's metal hinges are leagues above what Dells have. The <span class="blsp-spelling-error" id="SPELLING_ERROR_35">gigabit</span> <span class="blsp-spelling-error" id="SPELLING_ERROR_36">ethernet</span> is a big plus too, since we have <span class="blsp-spelling-error" id="SPELLING_ERROR_37">gigabit</span> connections at work and I'm planning to update my home router too. With auto-dim on the display, <span class="blsp-spelling-error" id="SPELLING_ERROR_38">speedstep</span>, and the <span class="blsp-spelling-error" id="SPELLING_ERROR_39">tickless</span> kernel option in 2.6.24 it's power management is capabilities are great. Hopefully this lasts me for a while with the only replacement part being the hard drive, but future laptop purchases will be <span class="blsp-spelling-error" id="SPELLING_ERROR_40">guaged</span> against this superb piece of hardware.
</p>
<p>
<h1>Some Linux info:</h1>
<p>
<code>lspci</code>
<blockquote><pre>
micheal@ruth:~$ lspci
00:00.0 Host bridge: Intel Corporation 82855PM Processor to I/O Controller (rev 03)
00:01.0 PCI bridge: Intel Corporation 82855PM Processor to AGP Controller (rev 03)
00:1d.0 USB Controller: Intel Corporation 82801DB/DBL/DBM (ICH4/ICH4-L/ICH4-M) USB UHCI Controller #1 (rev 01)
00:1d.1 USB Controller: Intel Corporation 82801DB/DBL/DBM (ICH4/ICH4-L/ICH4-M) USB UHCI Controller #2 (rev 01)
00:1d.2 USB Controller: Intel Corporation 82801DB/DBL/DBM (ICH4/ICH4-L/ICH4-M) USB UHCI Controller #3 (rev 01)
00:1d.7 USB Controller: Intel Corporation 82801DB/DBM (ICH4/ICH4-M) USB2 EHCI Controller (rev 01)
00:1e.0 PCI bridge: Intel Corporation 82801 Mobile PCI Bridge (rev 81)
00:1f.0 ISA bridge: Intel Corporation 82801DBM (ICH4-M) LPC Interface Bridge (rev 01)
00:1f.1 IDE interface: Intel Corporation 82801DBM (ICH4-M) IDE Controller (rev 01)
00:1f.3 SMBus: Intel Corporation 82801DB/DBL/DBM (ICH4/ICH4-L/ICH4-M) SMBus Controller (rev 01)
00:1f.5 Multimedia audio controller: Intel Corporation 82801DB/DBL/DBM (ICH4/ICH4-L/ICH4-M) AC'97 Audio Controller (rev 01)
00:1f.6 Modem: Intel Corporation 82801DB/DBL/DBM (ICH4/ICH4-L/ICH4-M) AC'97 Modem Controller (rev 01)
01:00.0 VGA compatible controller: ATI Technologies Inc Radeon Mobility M7 LW [Radeon Mobility 7500]
02:00.0 CardBus bridge: Texas Instruments PCI4520 PC card Cardbus Controller (rev 01)
02:00.1 CardBus bridge: Texas Instruments PCI4520 PC card Cardbus Controller (rev 01)
02:01.0 Ethernet controller: Intel Corporation 82540EP Gigabit Ethernet Controller (Mobile) (rev 03)
02:02.0 Network controller: Intel Corporation PRO/Wireless LAN 2100 3B Mini PCI Adapter (rev 04)
</blockquote></pre>

<code>/proc/cpuinfo</code>
<blockquote><pre>
micheal@ruth:~$ cat /proc/cpuinfo
processor : 0
vendor_id : GenuineIntel
cpu family : 6
model : 13
model name : Intel(R) Pentium(R) M processor 1.70GHz
stepping : 6
cpu MHz : 1400.000
cache size : 2048 KB
fdiv_bug : no
hlt_bug : no
f00f_bug : no
coma_bug : no
fpu : yes
fpu_exception : yes
cpuid level : 2
wp : yes
flags : fpu vme de pse tsc msr mce cx8 sep mtrr pge mca cmov pat clflush dts acpi mmx fxsr sse sse2 ss tm pbe bts est tm2
bogomips : 2792.87
clflush size : 64</pre></blockquote>

<code>xorg.conf (touchpad is disabled here)</code>
<blockquote><pre>
Section "Files"
EndSection

Section "InputDevice"
 Identifier "Generic Keyboard"
 Driver "kbd"
 Option "CoreKeyboard"
 Option "XkbRules" "xorg"
 Option "XkbModel" "pc104"
 Option "XkbLayout" "us"
EndSection

Section "InputDevice"
 Identifier "Configured Mouse"
 Driver "mouse"
 Option "CorePointer"
 Option "Device" "/dev/input/mice"
 Option "Protocol" "ImPS/2"
 Option "Emulate3Buttons" "true"
EndSection

Section "InputDevice"
 Identifier "Synaptics Touchpad"
 Driver "synaptics"
 Option "SendCoreEvents" "true"
 Option "Device" "/dev/psaux"
 Option "Protocol" "auto-dev"
 Option "HorizScrollDelta" "0"
 Option "VertScrollDelta" "0"
 Option "MaxTapTime" "0"
EndSection

Section "Device"
 Identifier "ATI Mobility 7500"
 Driver "radeon"
 BusID "PCI:1:0:0"
 Option "RenderAccel" "true"
 Option "backingstore" "true"
 Option "AllowGLXWithComposite" "true"
 Option "AddARGBGLXVisuals" "True"
 Option "TripleBuffer" "True"
EndSection

Section "Monitor"
 Identifier "Generic Monitor"
 Option "DPMS"
 HorizSync 28-64
 VertRefresh 43-60
EndSection

Section "Screen"
 Identifier "Default Screen"
 Device "ATI Mobility 7500"
 Monitor "Generic Monitor"
 DefaultDepth 24
 SubSection "Display"
 Modes "1280x1024" "1024x768"
 EndSubSection
EndSection

Section "ServerLayout"
 Identifier "Default Layout"
 Screen "Default Screen"
 InputDevice "Generic Keyboard"
 InputDevice "Configured Mouse"
 InputDevice "Synaptics Touchpad"
EndSection

Section "Extensions"
 Option "Composite" "true"
EndSection
</pre></blockquote>
